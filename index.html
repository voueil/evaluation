<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Project Evaluation</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="styles.css">
<style>
:root {
  --lavender: #a68ed6;
  --lavender-dark: #8a6bbf;
  --lavender-light: #f4f1fa;
}
.action-btn { 
  background: var(--lavender-dark); 
  color: #fff; 
  padding: 8px 14px; 
  border-radius: 12px; 
  border: none; 
  font-weight: 600; 
  cursor: pointer; 
  text-align: center; 
  display: inline-block; 
  margin-top: 8px; 
}
.action-btn:hover { background: #a68ed6; }
.project-row { margin-bottom: 18px; }
.project-row div { margin-bottom: 6px; }
.container { max-width: 1000px; margin:28px auto; padding:16px; }
.header { text-align:center; font-size:1.8rem; font-weight:700; margin-bottom:8px; }
.footer-note { text-align:center; font-size:1.2rem; font-weight:600; margin:28px 0; color:#555; }
.site-logo { width: 80px; display:block; margin:0 auto 10px; }
</style>
</head>
<body>

<header class="header">
  <img src="images/logo.png" alt="Logo" class="site-logo">
  <div>Project Evaluation</div>
</header>

<main class="container">
  <div style="text-align:center; margin-bottom:24px;">
    <a class="action-btn" href="allResults.html">View All Project Results</a>
  </div>

  <div class="card">
    <h3 style="text-align:center;">Project List</h3>
    <div id="projectsArea"></div>
  </div>
</main>

<script src="app.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const evaluator = params.get("evaluator");
if(!evaluator){
  location.href = "login.html"; 
}

const projectsArea = document.getElementById('projectsArea');
const projects = APP.INITIAL_PROJECTS;

let filteredProjects = [];
if(evaluator === "Dr. Eman Aljabarti"){ 
  filteredProjects = projects.filter(p => p.type === "Research Project");
} else if(evaluator === "Prof. Widad"){ 
  filteredProjects = projects.filter((p,i)=> i>=0 && i<=5);
} else if(evaluator === "Dr. Faten Bin Hamida"){ 
  filteredProjects = projects.filter((p,i)=> i>=6 && i<=11);
} else if(evaluator === "Dr. Noha Aldosari"){
  filteredProjects = projects.filter((p,i)=> i>=12 && i<=17);
}else if(evaluator === "Dr. Abdullah Aljahni" || evaluator === "Dr. Joud Alanzi"){ 
  filteredProjects = projects.filter(p => p.type === "Agent Project");
} else {
  filteredProjects = [];
}

filteredProjects.forEach((p, i) => {
  const [sectionPart, namesPart] = p.description.split(':');
  const tr = document.createElement('div');
  tr.className = 'project-row';
  tr.innerHTML = `
    <div style="text-align:center; font-weight:600; font-size:1.1rem;">${p.name}</div>
    <div style="text-align:center; color:#8a6bbf; font-size:1rem;">${sectionPart.trim()}</div>
    <div style="text-align:center; font-size:0.95rem; color:#444;">${namesPart ? namesPart.trim() : ''}</div>
    <div style="text-align:center; margin-top:8px;">
      <a class="action-btn" href="evaluate.html?project=${APP.INITIAL_PROJECTS.indexOf(p)}&evaluator=${encodeURIComponent(evaluator)}">Evaluate</a>
    </div>
  `;
  projectsArea.appendChild(tr);
});
</script>
</body>
</html>
